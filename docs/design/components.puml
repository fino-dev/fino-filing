@startuml fino-filing - Component Level
title fino-filing - Component Level (Abstracted)

!include <C4/C4_Container>
!include <C4/C4_Component>

Person(user, "User")

System_Boundary(fino_filing, "fino-filing") {
    Boundary(filing_collection_boundary, "Filing Collection") {
        Component(filing_collection, "Filing Collection")
    }
    Boundary(edger_collector_boundary, "Edger Collector") {
        Component(edger_collector, "Edger Collector")
        Component_Ext(edger_api, "Edger APIs", "External Api")
    }
    Boundary(edinet_collector_boundary, "Edinet Collector") {
        Component(edinet_collector, "Edinet Collector")
        Component_Ext(edinet_api, "Edinet APIs", "External Api")
    }
    Boundary(edinet_plugin_boundary, "Edinet plugin") {
        Component(edinet_indexer, "Edinet Indexer")
        ComponentDb_Ext(edinet_metadata_store, "Edinet Metadata Store", "Database")
    }

    ' user connection
    Rel(user, filing_collection, "Manage")
    Rel(user, edger_collector, "Collect")
    Rel(user, edinet_collector, "Collect")

    ' filing collection connection
    Rel( edger_collector, filing_collection, "Download")
    Rel(edinet_collector, filing_collection, "Download")

    ' edger connection
    Rel(edger_collector, edger_api, "Fetch")

    ' edinet connection
    Rel(edinet_collector, edinet_indexer, "Manage index")
    Rel(edinet_collector, edinet_api, "Fetch")
    Rel(edinet_indexer, edinet_metadata_store, "Store metadata")
}

skinparam linetype ortho
@enduml