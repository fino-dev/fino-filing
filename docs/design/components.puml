@startuml fino-edinet-collector - Component Level
title fino-edinet-collector - Component Level (Abstracted)

!include <C4/C4_Container>
!include <C4/C4_Component>

Person(user, "User")

System_Boundary(system, "fino-edinet-collector") {

    Boundary(application_boundary, "Application Layer") {
        Component(edinet, "Edinet Facade", "Public API")
        Component(collection, "Collection Facade", "Public API")
    }

    Boundary(domain_boundary, "Domain Layer") {
        Component(collection_model, "Collection Model", "Domain Model")
        Component(filing_model, "Filing Model", "Domain Model")
    }

    Boundary(adapter_boundary, "Adapters") {
        Component(edinet_adapter, "Edinet Adapter", "Adapter")
        Component(storage_adapter, "Filing Storage Adapter", "Adapter")
        Component(metadata_adapter, "Metadata Store Adapter", "Adapter")

        Component_Ext(edinet_api, "Edinet APIs", "external")
        Component_Ext(filing_storage, "Filing Storage", "external")
        ComponentDb_Ext(metadata_store, "Metadata Store", "external")
    }

    ' User interactions
    Rel(user, edinet, "sync_catalog & collect")
    Rel(user, collection, "search & get")

    ' Application to Domain
    Rel(edinet, collection_model, "")
    Rel(collection, collection_model, "")

    ' Application to Adapter
    Rel(edinet, edinet_adapter, "")

    ' domain to domain
    Rel(filing_model, collection_model, "")

    ' Domain to Adapter
    Rel(collection_model, storage_adapter, "")
    Rel(collection_model, metadata_adapter, "")

    ' Adapter to external
    Rel(edinet_adapter, edinet_api, "")
    Rel(storage_adapter, filing_storage, "")
    Rel(metadata_adapter, metadata_store, "")
}

skinparam linetype ortho
@enduml